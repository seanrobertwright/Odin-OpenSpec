<UserControl
    x:Class="Odin___OpenSpec.Views.CalendarView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Toolbar -->
        <Border Grid.Row="0" 
                Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,0,0,1"
                Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Left: New Event + View Mode -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                    <Button 
                        x:Name="NewEventButton"
                        Content="New event"
                        Click="AddEventButton_Click"
                        Style="{StaticResource AccentButtonStyle}"/>
                    <ComboBox 
                        x:Name="ViewModeComboBox"
                        SelectedIndex="3"
                        SelectionChanged="ViewMode_SelectionChanged"
                        Width="100">
                        <ComboBoxItem Content="Day"/>
                        <ComboBoxItem Content="Work week"/>
                        <ComboBoxItem Content="Week"/>
                        <ComboBoxItem Content="Month"/>
                        <ComboBoxItem Content="Split view"/>
                    </ComboBox>
                </StackPanel>

                <!-- Right: Navigation Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                    <Button 
                        x:Name="TodayButton"
                        Content="Today"
                        Click="TodayButton_Click"/>
                    <Button Content="&#xE00E;" 
                            FontFamily="Segoe MDL2 Assets" 
                            Click="PreviousMonth_Click"
                            ToolTipService.ToolTip="Previous Month"/>
                    <Button Content="&#xE00F;" 
                            FontFamily="Segoe MDL2 Assets" 
                            Click="NextMonth_Click"
                            ToolTipService.ToolTip="Next Month"/>
                    <TextBlock 
                        x:Name="CurrentMonthText"
                        Text="October 2025"
                        VerticalAlignment="Center"
                        Margin="12,0,0,0"
                        Style="{StaticResource SubtitleTextBlockStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content: Sidebar + Calendar Grid -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar -->
            <Border 
                Grid.Column="0"
                Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,0,1,0"
                Padding="16">
                <ScrollViewer>
                    <StackPanel Spacing="16">
                        <!-- Mini Calendar -->
                        <muxc:CalendarView
                            x:Name="MiniCalendar"
                            SelectionMode="Single"
                            SelectedDatesChanged="MiniCalendar_SelectedDatesChanged"
                            HorizontalAlignment="Center"
                            MaxWidth="280"/>

                        <!-- Calendar List -->
                        <StackPanel Spacing="8">
                            <TextBlock 
                                Text="My calendars" 
                                Style="{StaticResource BodyStrongTextBlockStyle}"
                                Margin="0,8,0,4"/>
                            <CheckBox 
                                x:Name="PersonalCalendarCheck"
                                IsChecked="True"
                                Checked="CalendarFilter_Changed"
                                Unchecked="CalendarFilter_Changed">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <Ellipse Width="12" Height="12" Fill="#FF6B2C"/>
                                    <TextBlock Text="Calendar"/>
                                </StackPanel>
                            </CheckBox>
                            
                            <TextBlock 
                                Text="People's calendars" 
                                Style="{StaticResource BodyStrongTextBlockStyle}"
                                Margin="0,12,0,4"/>
                            <CheckBox 
                                x:Name="WorkCalendarCheck"
                                IsChecked="True"
                                Checked="CalendarFilter_Changed"
                                Unchecked="CalendarFilter_Changed">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <Ellipse Width="12" Height="12" Fill="#0078D4"/>
                                    <TextBlock Text="cmcken05lj@gmail.com"/>
                                </StackPanel>
                            </CheckBox>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Month Grid View -->
            <ScrollViewer Grid.Column="1" 
                          HorizontalScrollBarVisibility="Disabled"
                          VerticalScrollBarVisibility="Auto">
                <Grid x:Name="MonthGridContainer" Padding="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Day of Week Headers -->
                    <Grid x:Name="DayHeadersGrid" Grid.Row="0" Height="32" Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="Sunday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                        <TextBlock Grid.Column="1" Text="Monday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                        <TextBlock Grid.Column="2" Text="Tuesday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                        <TextBlock Grid.Column="3" Text="Wednesday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                        <TextBlock Grid.Column="4" Text="Thursday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                        <TextBlock Grid.Column="5" Text="Friday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                        <TextBlock Grid.Column="6" Text="Saturday" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource CaptionTextBlockStyle}" Opacity="0.7"/>
                    </Grid>

                    <!-- Calendar Grid (Days will be populated dynamically in code-behind) -->
                    <Grid x:Name="CalendarGrid" Grid.Row="1">
                        <!-- Rows and columns created dynamically -->
                    </Grid>
                </Grid>
            </ScrollViewer>
        </Grid>
    </Grid>
</UserControl>
