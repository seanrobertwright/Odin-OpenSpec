<ContentDialog
    x:Class="Odin___OpenSpec.Views.EventDetailDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Event Details"
    PrimaryButtonText="Save"
    SecondaryButtonText="Delete"
    CloseButtonText="Cancel"
    DefaultButton="Primary"
    PrimaryButtonClick="SaveButton_Click"
    SecondaryButtonClick="DeleteButton_Click">

    <ScrollViewer MaxHeight="600">
        <StackPanel Spacing="16" Padding="4">
            <!-- View Mode (Default) -->
            <StackPanel x:Name="ViewModePanel" Spacing="16">
                <StackPanel Spacing="8">
                    <TextBlock Text="Title" FontWeight="SemiBold" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock x:Name="ViewTitleText" TextWrapping="Wrap" Style="{StaticResource SubtitleTextBlockStyle}"/>
                </StackPanel>

                <StackPanel Spacing="8">
                    <TextBlock Text="When" FontWeight="SemiBold" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <StackPanel Spacing="4">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE163;" FontSize="16"/>
                            <TextBlock x:Name="ViewDateTimeText"/>
                        </StackPanel>
                        <TextBlock x:Name="ViewAllDayText" Visibility="Collapsed" Text="All day event" Opacity="0.7"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel x:Name="ViewLocationPanel" Spacing="8" Visibility="Collapsed">
                    <TextBlock Text="Location" FontWeight="SemiBold" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE707;" FontSize="16"/>
                        <TextBlock x:Name="ViewLocationText"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel x:Name="ViewDescriptionPanel" Spacing="8" Visibility="Collapsed">
                    <TextBlock Text="Description" FontWeight="SemiBold" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock x:Name="ViewDescriptionText" TextWrapping="Wrap"/>
                </StackPanel>

                <StackPanel Spacing="8">
                    <TextBlock Text="Calendar" FontWeight="SemiBold" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Ellipse x:Name="ViewCalendarColorEllipse" Width="12" Height="12"/>
                        <TextBlock x:Name="ViewCalendarText"/>
                    </StackPanel>
                </StackPanel>

                <Button 
                    x:Name="EditButton"
                    Content="Edit Event"
                    Click="EditButton_Click"
                    HorizontalAlignment="Stretch"
                    Style="{StaticResource AccentButtonStyle}"/>
            </StackPanel>

            <!-- Edit Mode -->
            <StackPanel x:Name="EditModePanel" Spacing="16" Visibility="Collapsed">
                <!-- Event Title -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Event Title" FontWeight="SemiBold"/>
                    <TextBox 
                        x:Name="TitleTextBox"
                        PlaceholderText="Enter event title"
                        MaxLength="100"/>
                </StackPanel>

                <!-- Date and Time -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock Text="Start Date" FontWeight="SemiBold"/>
                        <CalendarDatePicker 
                            x:Name="StartDatePicker"
                            HorizontalAlignment="Stretch"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Spacing="8">
                        <TextBlock Text="Start Time" FontWeight="SemiBold"/>
                        <TimePicker 
                            x:Name="StartTimePicker"
                            ClockIdentifier="12HourClock"
                            HorizontalAlignment="Stretch"/>
                    </StackPanel>
                </Grid>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock Text="End Date" FontWeight="SemiBold"/>
                        <CalendarDatePicker 
                            x:Name="EndDatePicker"
                            HorizontalAlignment="Stretch"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Spacing="8">
                        <TextBlock Text="End Time" FontWeight="SemiBold"/>
                        <TimePicker 
                            x:Name="EndTimePicker"
                            ClockIdentifier="12HourClock"
                            HorizontalAlignment="Stretch"/>
                    </StackPanel>
                </Grid>

                <!-- All Day Event -->
                <CheckBox 
                    x:Name="AllDayCheckBox"
                    Content="All day event"
                    Checked="AllDayCheckBox_Changed"
                    Unchecked="AllDayCheckBox_Changed"/>

                <!-- Location -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Location" FontWeight="SemiBold"/>
                    <TextBox 
                        x:Name="LocationTextBox"
                        PlaceholderText="Add location"
                        MaxLength="200"/>
                </StackPanel>

                <!-- Calendar Source -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Calendar" FontWeight="SemiBold"/>
                    <ComboBox 
                        x:Name="CalendarSourceComboBox"
                        HorizontalAlignment="Stretch"
                        SelectedIndex="0">
                        <ComboBoxItem Content="Personal" Tag="personal"/>
                        <ComboBoxItem Content="Work" Tag="work"/>
                    </ComboBox>
                </StackPanel>

                <!-- Description -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Description" FontWeight="SemiBold"/>
                    <TextBox 
                        x:Name="DescriptionTextBox"
                        PlaceholderText="Add description"
                        TextWrapping="Wrap"
                        AcceptsReturn="True"
                        Height="100"
                        MaxLength="500"/>
                </StackPanel>

                <Button 
                    x:Name="CancelEditButton"
                    Content="Cancel Edit"
                    Click="CancelEditButton_Click"
                    HorizontalAlignment="Stretch"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</ContentDialog>
